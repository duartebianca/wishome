// Define the provider and URL to SQLite
datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

// Schema for user Gifter and Wishmaker
model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String
  role      Role     // Define if it is 'GIFTER' or 'WISHMAKER'
  createdAt DateTime @default(now())
  
  // Relationship with the gifts purchased or that they are "thinking" about
  giftStatus GiftStatus[]
}

// Definition of roles to differentiate between Gifter and Wishmaker
enum Role {
  GIFTER
  WISHMAKER
}

// Schema for the Gift List
model Gift {
  id        Int      @id @default(autoincrement())
  name      String   // Name of the gift
  price     Float    // Price of the gift
  link      String?  // Store link (optional)
  imageUrl  String?  // Image URL of the gift
  status    GiftStatus[]  // Status of the gift (available, purchased, thinking)

  // Timestamps
  createdAt DateTime @default(now())
}

// Status of a gift (purchased, thinking, etc.)
model GiftStatus {
  id        Int      @id @default(autoincrement())
  status    Status   // Define if it is 'PURCHASED', 'THINKING', or 'AVAILABLE'
  gift      Gift     @relation(fields: [giftId], references: [id])
  giftId    Int
  user      User     @relation(fields: [userId], references: [id])
  userId    Int
  updatedAt DateTime @updatedAt
}

// Enum for the statuses of gifts
enum Status {
  AVAILABLE
  PURCHASED
  THINKING
}
